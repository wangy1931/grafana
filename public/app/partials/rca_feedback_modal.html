<div class="modal-body" ng-controller="RcaFeedbackCtrl as ctrl">

  <a class="modal-close" ng-click="dismiss();">
    <i class="fa fa-remove"></i>
  </a>

  <h3>
    故障溯源关系添加
  </h3>

  <form class="gf-form-group">
    <div class="gf-form-section-modal">
      <h3 class="page-heading">报警现象</h3>
      <div class="gf-form-inline">
        <div class="gf-form max-width-28">
          <span class="gf-form-label width-9">现象指标</span>
          <input type="text" class="gf-form-input" ng-model="ctrl.alertMetric"/>
        </div>
        <div class="gf-form max-width-28">
          <span class="gf-form-label width-9">现象机器</span>
          <input type="text" class="gf-form-input" ng-model="ctrl.alertHost"/>
        </div>
      </div>
    </div>

    <div class="gf-form-section-modal">
      <h3 class="page-heading">报警根源</h3>
      <div class="gf-form-inline">
        <div class="gf-form">
          <span class="gf-form-label width-9">类型</span>
          <select class="gf-form-select-wrapper gf-form-input width-9"
            ng-model="ctrl.typeSelected" 
            ng-options="item.name for item in ctrl.types"
            ng-change="ctrl.changeType(ctrl.typeSelected)">
          </select>
        </div>
      </div>

      <div class="gf-form-inline" ng-if="ctrl.typeSelected.value === 'metric'">
        <div class="gf-form max-width-28">
          <span class="gf-form-label width-9">根源指标</span>
          <input type="text" class="gf-form-input" ng-model="ctrl.causeMetric" required bs-typeahead-old="suggestMetrics"/>
        </div>
        <div class="gf-form max-width-28">
          <span class="gf-form-label width-9">根源机器</span>
          <input type="text" class="gf-form-input" ng-model="ctrl.causeHost" required bs-typeahead-old="suggestTagHost"/>
        </div>
        <div class="gf-form max-width-28">
          <span class="gf-form-label width-9">确认程度</span>
          <label class="gf-form-inline">
            <input class="gf-form-input" type="radio" name="confident" value="100" ng-model="ctrl.confidenceLevel"/>
            <span class="gf-form-label gf-form-label-radio">非常确定</span>
          </label>
          <label class="gf-form-inline">
            <input class="gf-form-input" type="radio" name="confident" value="50" ng-model="ctrl.confidenceLevel"/>
            <span class="gf-form-label gf-form-label-radio">可能</span>
          </label>
        </div>
      </div>

      <div class="gf-form-inline" ng-if="ctrl.typeSelected.value === 'other'">
      </div>

      <button class="btn gf-form-btn btn-success"
        style="padding: 0.1rem 0.5rem;"
        ng-click="ctrl.addCause(ctrl.causeMetric, ctrl.causeHost, ctrl.confidenceLevel)">
        添加
      </button>      

      <br/>
      <div class="gf-form-inline">
        <div class="gf-form max-width-28" ng-repeat="cause in ctrl.rootCauseMetrics">
          <span bs-tooltip="'{{ cause.name }}'" data-placement="bottom" class="gf-form-label width-8">{{ cause.name }}</span>
          <span class="gf-form-label width-8">{{ cause.host }}</span>
          <span class="gf-form-label width-8">{{ ctrl.confidences[cause.confidenceLevel] }}</span>
          <button class="btn gf-form-btn btn-danger" ng-click="ctrl.removeCause($index)"><i class="fa fa-minus"></i></button>
        </div>
      </div>
    </div>

    <div class="gf-form-button-row">
      <button type="button" class="btn btn-inverse" ng-click="dismiss();">取消</button>
      <button type="button" class="btn btn-success" ng-click="ctrl.submitRCAFeedback();">提交</button>
    </div>
  </form>

</div>


    