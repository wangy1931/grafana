<topnav title="健康管理" icon="fa fa-fw fa-stethoscope" subnav="true">
  <ul class="nav">
    <li><a href="anomaly">列表</a></li>
    <li class="active"><a>指标</a></li>
  </ul>
  <ul class="nav pull-right">
    <li ng-if="dashboard">
      <gf-time-picker dashboard="dashboard"></gf-time-picker>
    </li>
  </ul>
</topnav>

<div class="main-view-container" ng-class="{'fixed-top':toTop}">
  <div class="table-container" ng-class="{'fixed-top':toTop}">
    <div class="table-head">
      <table>
        <tr>
          <th style="width: 80px;"><input type="checkbox" ng-checked="anomalyList.length == selections.length" ng-click="changeSelect(null)"></th>
          <th style="width: 600px"><p class="text-overflow">指标<p></th>
          <th style="width: 150px;">健康值</th>
          <th>操作</th>
        </tr>
      </table>
    </div>
    <div class="table-body">
      <table style="width: 100%;">
        <tr ng-repeat="anomalyItem in anomalyList">
          <td style="width: 80px;"><input type="checkbox" ng-model="anomalyItem.checked" ng-click="changeSelect(anomalyItem)"></td>
          <td style="width: 600px; text-align: left;"><p class="text-overflow">{{_.getMetricName(anomalyItem.metric)+ "{host=" + anomalyItem.host + "}"}}<p></td>
          <td  style="width: 150px;">{{anomalyItem.health}}</td>
          <td><button class="btn" ng-click="exclude(anomalyItem)">暂缓报警</button></td>
        </tr>
      </table>
    </div>
    <div class="clearfix"></div>
  </div>

  <div ng-if="submenuEnabled" ng-include="'app/partials/submenu.html'">
  </div>
  <div class="grafana-row" ng-controller="RowCtrl"
       ng-repeat="(row_name, row) in dashboard.rows" row-height>

    <div class="row-control">
      <div class="row-control-inner">
        <div class="row-close" ng-show="row.collapse" data-container="body" data-placement="bottom" >
          <div class="row-close-buttons">
							<span class="row-button bgPrimary" ng-click="toggleRow(row)">
								<i bs-tooltip="'Expand row'" data-container="body" data-placement="right" class="fa fa-caret-left pointer" ></i>
							</span>
          </div>
          <div class="row-text pointer" ng-click="toggleRow(row)" ng-bind="row.title | interpolateTemplateVars:this"></div>
        </div>
      </div>

      <div class="panels-wrapper" ng-if="!row.collapse">
        <div class="row-text pointer" ng-click="toggleRow(row)" ng-if="row.showTitle" ng-bind="row.title | interpolateTemplateVars:this">
        </div>


        <div ng-repeat="(name, panel) in row.panels track by panel.id" class="panel" ui-draggable="!dashboardViewState.fullscreen" drag="panel.id"
             ui-on-Drop="onDrop($data, row, panel)" drag-handle-class="drag-handle" panel-width>
          <panel-loader type="panel.type" class="panel-margin"></panel-loader>
        </div>



        <div panel-drop-zone class="panel panel-drop-zone" ui-on-drop="onDrop($data, row)" data-drop="true">
          <div class="panel-container" style="background: transparent">
            <div style="text-align: center">
              <em>点击这里(drop here)</em>
            </div>
          </div>
        </div>

        <div class="clearfix"></div>
      </div>
    </div>
  </div>
</div>
