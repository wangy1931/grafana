<navbar icon="fa fa-fw fa-list-alt" title="智能分析" title-url="/report">
  <ul class="nav">
    <li><a href="/report">健康报告</a></li>
    <li class="active"><a href="/report/template">报告设置</a></li>
    <li><a href="/report/edit">报告编辑</a></li>
  </ul>
</navbar>

<div class="page-container" ng-init="ctrl.initTemplate()">
  <div class="page-header">
    <h2>报告设置</h2>
  </div>

  <h4 class="report-title">多维度分析系统现状，为系统优化改进提供科学依据</h4>

  <div>
    <form class="gf-form-group">
      <div class="parse-form-group">
        <div class="gf-form">
          <span class="gf-form-label width-10">消息推送开启
            <em>*</em>
          </span>
          <cwiz-switch switch-class="summary-switch" enabled="ctrl.reportTemplate.enabled" on-change="ctrl.switch();"
          data-text-on="开启" data-text-off="关闭"></cwiz-switch>
        </div>

        <div class="gf-form">
          <span class="gf-form-label width-10">推送邮箱
            <em>*</em>
          </span>
          <input ng-repeat="email in ctrl.reportTemplate.recipients" class="gf-form-input max-width-21" type="email" required ng-model="email" />
        </div>

        <div class="gf-form">
          <span class="gf-form-label width-10">推送时间
            <em>*</em>
          </span>
          <input class="gf-form-input max-width-21" type="number" required ng-model="ctrl.reportTemplate.deliverHour" />
        </div>
      </div>

      <div class="parse-form-group">
        <div class="gf-form">
          <span class="gf-form-label width-10">报告模板
            <em>*</em>
          </span>
        </div>

        <div class="gf-form template-container">
          <div class="template-item" ng-click="ctrl.chooseTemplate(template)" ng-repeat="template in ctrl.reportTemplate.sections">
            <p>{{template.name}}模板</p>
            <div class="template-img" ng-class="{true: 'active'}[template.selected]">
              <i class="fa fa-check" ng-if="template.selected"></i>
              <img style="width: 100%; height: 100%;" src="{{template.img}}" alt="">
            </div>
          </div>
        </div>
      </div>

      <div class="parse-form-group no-border">
        <a class="btn btn-success" ng-click="ctrl.saveTemplate()">保存</a>
        <a class="btn btn-inverse" href="/report">取消</a>
      </div>
    </form>

  </div>